<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WhatsAppChatGPT</title>
  <style>
    /* CSS styles */
    body {
      font-family: Arial, sans-serif;
      background-color: #f0f0f0;
    }

    .container {
      max-width: 800px;
      margin: 40px auto;
      padding: 20px;
      background-color: #fff;
      border: 1px solid #ddd;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    .header {
      background-color: #333;
      color: #fff;
      padding: 10px;
      text-align: center;
    }

    .header h1 {
      margin: 0;
    }

    .chat-log {
      padding: 20px;
    }

    .message {
      margin-bottom: 20px;
      padding: 10px;
      border-bottom: 1px solid #ccc;
    }

    .message:last-child {
      border-bottom: none;
    }

    .message .username {
      font-weight: bold;
      color: #333;
    }

    .message .text {
      color: #666;
    }

    .input-field {
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 10px;
      width: 100%;
    }

    .input-field:focus {
      border-color: #aaa;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    .send-button {
      background-color: #4CAF50;
      color: #fff;
      padding: 10px 20px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
    }

    .send-button:hover {
      background-color: #3e8e41;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>WhatsAppChatGPT</h1>
    </div>
    <div class="chat-log">
      <!-- chat log will be displayed here -->
    </div>
    <input type="text" id="input-field" class="input-field" placeholder="Type a message...">
    <button id="send-button" class="send-button">Send</button>
  </div>

  <script>
    // JavaScript code
    import express from 'express';
    import { Client } from 'whatsapp-web.js';
    import { ChatGPTAPI } from 'chatgpt';

    const app = express();

    const clientWP = new Client({
      puppeteer: { headless: true, args: ['--no-sandbox', '--disable-setuid-sandbox', '--unhandled-rejections=strict'] },
      authStrategy: new LocalAuth({
        clientId: 'WhatsAppChatGPT',
        dataPath: `./authFolder/WhatsAppChatGPT`,
      }),
    });

    clientWP.on('loading_screen', (percent, message) => {
      console.log('LOADING SCREEN', percent, message);
    });

    clientWP.on("qr", (qr) => {
      console.log("qr> ", qr);
      qrcode.generate(qr, { small: true });
    });

    clientWP.on("authenticated", () => {
      console.log("Auth Completed!");
    });

    clientWP.on("ready", () => {
      console.log("WhatsAppChatGPT is ready!");
    });

    clientWP.on('auth_failure', msg => {
      console.error('Auth FAILURE', msg);
    });

    clientWP.initialize();

    (async () => {
      const api = new ChatGPTAPI({
        apiKey: 'YOUR_OPENAI_API_KEY',
      });

      clientWP.on('message', async msg => {
        console.log('MESSAGE RECEIVED', msg.body);

        if (msg.body.startsWith('!chatgpt ')) {
          const chat = await msg.getChat();
          chat.sendStateTyping();
          let searchGPT = msg.body.slice(9);
          const res = await api.sendMessage(searchGPT);
          chat.clearState();
          msg.reply(res.text);
        }
      });
    })();

    app.listen(process.env.PORT, () => {
      console.log("Server Running Live on Port : " + process.env.PORT);
    });

    // Add event listener to send button
    document.getElementById('send-button').addEventListener('click', () => {
      const inputField = document.getElementById('input-field');
      const message =
